<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í≤Ä Í∞ïÌôî - 2026 Ï†ÑÏÑ§Ïùò ÎåÄÏû•Ïû•Ïù¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@400;700;900&display=swap');
        
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            background-color: #020617; 
            color: #f8fafc; 
            margin: 0; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh; 
            overflow-x: hidden; 
        }

        .title-font { font-family: 'Black Han Sans', sans-serif; }

        .hammering { animation: hammer-anim 0.4s infinite; }
        @keyframes hammer-anim { 
            0%, 100% { transform: rotate(-20deg); } 
            50% { transform: rotate(10deg) translateY(10px); } 
        }

        .loading-bar { 
            width: 0%; 
            height: 100%; 
            background: linear-gradient(90deg, #6366f1, #a855f7); 
            transition: width linear; 
        }

        .sword-glow { 
            filter: drop-shadow(0 0 15px rgba(99, 102, 241, 0.8)); 
            transition: all 0.3s; 
        }

        .ad-container { 
            width: 100%; 
            max-width: 320px; 
            min-height: 50px; 
            background-color: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.3);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            margin-top: 2rem; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            border-radius: 12px; 
            position: relative;
            overflow: hidden;
        }

        .ad-label {
            position: absolute;
            top: 2px;
            right: 6px;
            font-size: 8px;
            color: #475569;
            z-index: 10;
        }

        .btn-grad {
            background-image: linear-gradient(to right, #4f46e5 0%, #7c3aed 51%, #4f46e5 100%);
            transition: 0.5s;
            background-size: 200% auto;
        }
        .btn-grad:hover { background-position: right center; }
    </style>
</head>
<body class="p-4">

    <div id="game-ui" class="bg-slate-900 p-6 rounded-[2rem] shadow-2xl w-full max-w-sm border border-slate-800 my-4 relative">
        
        <!-- ÏÉÅÎã® Ï†ïÎ≥¥ -->
        <div class="flex justify-between items-center mb-8">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center overflow-hidden ring-2 ring-indigo-500/20 shadow-lg">
                    <span id="default-icon" class="text-2xl">üë§</span>
                    <img id="user-photo" src="" class="hidden w-full h-full object-cover">
                </div>
                <div>
                    <p id="user-display-name" class="text-[10px] text-slate-500 font-black tracking-widest uppercase">GUEST PLAYER</p>
                    <p id="gold-display" class="text-2xl font-black text-yellow-500">100 G</p>
                </div>
            </div>
            <div class="flex flex-col gap-1">
                <button id="login-btn" onclick="handleGoogleLogin()" class="flex items-center gap-2 text-[10px] bg-white text-slate-900 px-3 py-2 rounded-xl font-black hover:bg-slate-200 transition-all shadow-lg">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" width="14"> LOGIN
                </button>
                <button id="logout-btn" onclick="handleLogout()" class="hidden text-[10px] bg-slate-800/80 hover:bg-red-900/40 px-3 py-2 rounded-xl text-slate-400 border border-white/5 font-bold">LOGOUT</button>
            </div>
        </div>

        <!-- Í≤Ä Í∞ïÌôî ÏÑπÏÖò -->
        <div class="bg-gradient-to-b from-slate-950 to-slate-900 rounded-[2.5rem] p-12 flex flex-col items-center border border-white/5 mb-8 relative shadow-inner">
            <div id="hammer-icon" class="absolute top-8 right-12 text-6xl hidden z-10 hammering">üî®</div>
            <div id="sword-display" class="text-8xl mb-6 select-none sword-glow">üó°Ô∏è</div>
            <h2 id="sword-name" class="title-font text-3xl text-slate-100 tracking-tight text-center">ÌõàÎ†®Ïö© Î™©Í≤Ä</h2>
            <p id="sword-level" class="font-black text-indigo-500 text-sm mt-1 tracking-[0.2em]">+0 ENHANCED</p>
            <div id="progress-container" class="absolute bottom-0 left-0 w-full h-2 bg-slate-800 hidden">
                <div id="progress-bar" class="loading-bar"></div>
            </div>
        </div>

        <!-- Î≤ÑÌäº -->
        <div class="space-y-4">
            <button id="enhance-btn" onclick="handleEnhance()" class="btn-grad w-full text-white py-6 rounded-3xl font-black text-2xl shadow-xl shadow-indigo-500/20 active:scale-95 transform transition-all">
                Í∞ï Ìôî (<span id="cost-display">10</span> G)
            </button>
            <button onclick="handleSell()" class="w-full bg-slate-800 hover:bg-slate-700 text-slate-300 py-4 rounded-2xl font-bold text-sm border border-white/5 transition-colors">
                Í≤Ä ÌåêÎß§ (<span id="sell-display">0</span> G)
            </button>
        </div>

        <!-- Î°úÍ∑∏ -->
        <div class="mt-8 h-20 overflow-y-auto bg-black/40 rounded-2xl p-4 text-[11px] font-medium border border-white/5 flex items-center justify-center">
            <div id="status-msg" class="text-slate-500 italic text-center">> ÎåÄÏû•Í∞ÑÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§.</div>
        </div>

        <!-- Ïπ¥Ïπ¥Ïò§ Ïï†ÎìúÌïè Í¥ëÍ≥† -->
        <div class="ad-container">
            <span class="ad-label">AD</span>
            <ins class="kakao_ad_area" style="display:none;"
                 data-ad-unit = "DAN-lXDfLDy1eqTSjmCp"
                 data-ad-width = "320"
                 data-ad-height = "50"></ins>
            <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
        </div>
        
        <p id="save-notice" class="text-center text-slate-700 text-[9px] mt-4 uppercase tracking-widest font-bold">Cloud Sync Ready</p>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAejpiSvM6DaPCebOlZ-ktrHkDBMmljD4Q",
            authDomain: "sowrd-game.firebaseapp.com",
            projectId: "sowrd-game",
            storageBucket: "sowrd-game.firebasestorage.app",
            messagingSenderId: "196203629749",
            appId: "1:196203629749:web:6eaf9d35fc81b5a13602fc"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const googleProvider = new firebase.auth.GoogleAuthProvider();

        let state = { user: null, gold: 100, level: 0, isWorking: false };
        const swordNames = ["Î™©Í≤Ä", "Ï≤†Í≤Ä", "Í∞ïÏ≤†Í≤Ä", "Ïû•Í≤Ä", "Í∏∞ÏÇ¨Í≤Ä", "Î™ÖÍ≤Ä", "ÏòÅÌòºÍ≤Ä", "Ïö©ÏÇ¨Í≤Ä", "Ï†ÑÏÑ§Í≤Ä", "Ïã†ÌôîÍ≤Ä", "Ï†àÎåÄÍ≤Ä"];

        async function handleGoogleLogin() {
            try { await auth.signInWithPopup(googleProvider); } catch (e) { console.error(e); }
        }

        function handleLogout() { auth.signOut().then(() => location.reload()); }

        auth.onAuthStateChanged(async (user) => {
            if (user) {
                state.user = user;
                const userRef = db.collection('users').doc(user.uid);
                const doc = await userRef.get();
                if (doc.exists) {
                    state.gold = doc.data().gold;
                    state.level = doc.data().level;
                } else {
                    await userRef.set({ gold: state.gold, level: state.level });
                }
                updateLoginUI(user);
                updateUI();
            }
        });

        function updateLoginUI(user) {
            document.getElementById('login-btn').classList.add('hidden');
            document.getElementById('logout-btn').classList.remove('hidden');
            document.getElementById('default-icon').classList.add('hidden');
            const photo = document.getElementById('user-photo');
            photo.src = user.photoURL;
            photo.classList.remove('hidden');
            document.getElementById('user-display-name').innerText = user.displayName;
            document.getElementById('save-notice').innerText = "CLOUD SYNC ACTIVE ‚úì";
            document.getElementById('save-notice').className = "text-center text-indigo-500 text-[9px] mt-4 uppercase tracking-widest font-bold";
        }

        function updateUI() {
            document.getElementById('gold-display').innerText = state.gold.toLocaleString() + " G";
            document.getElementById('sword-level').innerText = `+${state.level} ENHANCED`;
            document.getElementById('sword-name').innerText = swordNames[Math.min(Math.floor(state.level/5), swordNames.length-1)];
            document.getElementById('cost-display').innerText = Math.floor(10 * Math.pow(1.45, state.level)).toLocaleString();
            document.getElementById('sell-display').innerText = Math.floor(25 * Math.pow(1.55, state.level)).toLocaleString();
            document.getElementById('sword-display').style.filter = `drop-shadow(0 0 ${state.level * 3}px rgba(99, 102, 241, 0.8))`;
        }

        async function syncData() {
            if (state.user) {
                await db.collection('users').doc(state.user.uid).update({ gold: state.gold, level: state.level });
            }
        }

        function handleEnhance() {
            if (state.isWorking) return;
            const cost = Math.floor(10 * Math.pow(1.45, state.level));
            if (state.gold < cost) return addLog("Í≥®ÎìúÍ∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§!", "text-red-400");
            state.gold -= cost; state.isWorking = true; updateUI();
            document.getElementById('progress-container').classList.remove('hidden');
            document.getElementById('hammer-icon').classList.remove('hidden');
            const bar = document.getElementById('progress-bar');
            bar.style.transition = 'none'; bar.style.width = '0%';
            setTimeout(() => { bar.style.transition = 'width 1s linear'; bar.style.width = '100%'; }, 50);
            setTimeout(() => {
                state.isWorking = false;
                document.getElementById('progress-container').classList.add('hidden');
                document.getElementById('hammer-icon').classList.add('hidden');
                if (Math.random() * 100 <= Math.max(1, 100 - (state.level * 6.5))) {
                    state.level++; addLog(`Í∞ïÌôî ÏÑ±Í≥µ! (+${state.level})`, "text-yellow-400 font-bold");
                } else {
                    if (state.level >= 10) state.level = 0; else if (state.level >= 3) state.level--;
                    addLog("Í∞ïÌôîÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.", "text-slate-500");
                }
                updateUI(); syncData();
            }, 1050);
        }

        function handleSell() {
            if (state.level === 0 || state.isWorking) return;
            const price = Math.floor(25 * Math.pow(1.55, state.level));
            state.gold += price; state.level = 0; updateUI(); syncData();
            addLog(`${price} GÏóê Í≤ÄÏùÑ ÌåêÎß§ÌñàÏäµÎãàÎã§.`, "text-blue-400");
        }

        function addLog(msg, colorClass) {
            const status = document.getElementById('status-msg');
            status.innerText = `> ${msg}`;
            status.className = `text-center italic ${colorClass}`;
        }
    </script>
</body>
</html>